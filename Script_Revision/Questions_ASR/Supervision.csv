Question;Reponse
Sur Centreon, dans quel ordre dois je creer les hosts, les commandes, ... ?;En 1e les commandes, puis les templates de service, puis les templates d'host et enfin les hosts.
Quelle est la commande pour verifier si un hôte est en ligne ? (vivant ?);Check_ping
Quel est le comportement de Centreon lorsqu'un service ne repond plus au check ?;Il va dans un premier temps check l'host en relation avec le service down pour verifier l'etat de ce dernier, si il ne repond pas il va remonter les relations parentes jusqu'a trouver un noeud vivant. 
Il existe 4 types de supervision, lesquels ? ;La supervision inactive (pas de supervision ou alarme ignoree), Reactive (pas de Supervision ou reaction aux prblms quand ils surviennent), Interactive (Supervision OK mais correction manuelle des incidents), et Proactive #Saint Graal (detection des pannes et resolution automatisee) 
Sur quel protocole repose la supervision ? En particulier pour les sondes distantes avec intermediaire ?;Sur SNMP Simple Network Management Protocol
Quels sont les ports de SNMP et quel port est utilise pour quoi ? ;161 et 162 UDP ou TCP, 161 = l'agent supervise ecoute les request du superviseur, 162 = le superviseur ecoute les request des agents supervises
Expliquez ce qu'est une MIB ? ;Les MIB sont les bases d'informations dont disposent les agents et qui contiennet les infos des differents services, ... Elle est constituee d OID qui represente les noeuds de la base MIB.
Un OID c'est quoi ? ;Un OID est un object identifier, c'est ce qui permet d'identifier les noeuds de l'arborescence de la MIB, par exemple l OID 1.3.6.1.2.1.2.2.1.2 = ifdescr = interface rsx 
On me dit que l'OID 1.3.6.1.4.1.9 a quelque chose de special, quoi donc ? ;C'est un OID d'une MIB proprietaire parce qu'il y a ....4.1 = catin = qui fait payer ... donc MIB proprietaire
C'est quoi une TRAP SNMP ?;C'est l'alerte qu'envoie un agent supervise lorsqu'un evenement anormal se produit (shut du service par exemple), a contrario de la sonde où le superviseur va check l'etat du service et se rendre compte de lui même que le service est down
Pourquoi est il preferable que la TRAP SNMP soit parametre en UDP ? ;Dans le cas de figure où l'agent supervise a un incident, et donc potentiellement qu'un service pose probleme, il ne doit pas s encombrer de la gestion qu entraine le TCP pour l envoi de l alerte au superviseur, par exemple un switch sature ne doit pas se saturer encore plus avec un echange de trame TCP...
Quels sont les outils (commandes) pour recuperer des informations dans les MIB ? ;snmpwalk et snmpget, exemple : snmpwalk -v2c -Of -c public localhost = liste des OID avec leurs noms, si on remplace -Of par -On = avec les numeros ce qui est bien plus performant pour le scripting.
Quel est le nom du mecanisme qui permet a Nagios / Centreon de remonter l'arborescence en cas de defaillance d'un service / host ?;C'est le NETWORK OUTAGE
J'ai un serveur chez un client qui me sert de porte d'entree pour toute ma supervision dans leur entreprise, si le service SSH tombe je perds toute la supervision, quel nom donne-t-on a ce point cle ?;C'est un SPOF de supervision = Single Point Of Failure
J'essaie de creer une sonde pour un HOST, et je dois gerer le code retour de cette derniere, a quoi correspondent ces numeros ? (0 - 1 - 2) ;0 = UP (Ok), 1 = DOWN (L'host est down), 2 = UNREACHABLE (un Parent est down donc l host est injoignable)
Dans une doc il ets indique que pour la sonde check_service je peux recuperer 5 statuts differents, lesquels ? ;0 = OK , 1 = WARNMING , 2 = CRITICAL , 3 = UNKNOWN (Pas encore de donnees ou prblm interne), 4 = PENDING (En cours de traitement des donnees) 
Lorsqu'un statut est confirme, on dit qu'il est ? ;HARD, l'etat est confirme.
Quelle difference entre les etats HARD et SOFT ? ;Une sonde va renvoyer un resultat suite a un Check, si le statut est confirme et n'a pas change depuis un certain temps on a alors un etat HARD, lorsque le resultat aboutit a un changement d'etat (CRITICAL par ex) on passe alors en SOFT qui ets une periode de transition pendant laquelle on va tester avec un intervalle plus court pour valider ou non l'etat et passer a un HARD
Quels sont les differents parametres utilises pour l'etablissement des HARD / SOFT state ?;Il y a le normal check qui est la frequence du check en temps normal (donc sous HARD state) puis le retry check qui accelere la frequence des checks (lors d'un passage en SOFT), et enfin le max check qui determine le nmbr de fois avant de passer d'un SOFT state vers un HARD  
Je dois superviser une entreprise distante, ils ont un routeur FW en front et une DMZ, comment puis je proceder ?  ;En installant un serveur de supervision distant chez eux qui communiquera avec mon serveur de supervision principal ou grâce a la commande Check_by_SSH, ...
Le Flapping c'est quoi ? ;C'est lorsqu'un service a des changements d'etat tres frequents, il va alors remonte ok warning critique warning ok warning crit... ça va alors generer beaucoup de notifications
Comment se premunir du spam effectue par Centreon en cas de Flapping ?;Un parametrage particulier existe dans Centreon : Flapping, il premet d'etablir 2 seuils, un bas en dessous duquel un service est en etat normal et un haut au dessus duquel le service est normal, tant que le resultat de la sonde se situe entre les 2 seuils on est en etat de flap et les notif peuvent être desactivees.
A quoi faut il faire attention si l'on souhaite que centreon nous envoie des notifications par mail ?;Il faut parametrer un MTA (mail transfert Agent), Centreon n'etant pas un serveur de messagerie, il a besoin d'un MTA pour pouvoir envoyer les messages.
Que doit on configurer dans Centreon pour que le comportement de Network Outage puisse fonctionner correctement ?;Il faut bien parametrer les relations Parents / enfants entre les hôtes / services.
Nous avons une alerte qui remonte dans la supervision, je l'ai bien pris en compte, que puis je faire pour que l'alerte ne remonte plus dans l'interface ?;On peut acquitter l'alerte ou bien effectuer une maintenance dessus. Ne pas oublier de mettre un commentaire / des informations pour la traçabilite.
J'ai un nouveau client de supervision, je dois superviser 67 nouveaux serveurs, sur lesquels beaucoup de services sont a superviser, sur quoi puis je m'appuyer pour aller plus vite ?;Pour deployer beaucoup d'hosts il faut se baser sur les templates, de services et d'hosts, on peut aussi scripter grâce a la commande #centreon et des differents fichiers de conf contenus dans /etc/nagios. 
Je teste une sonde avant de la mettre en prod : [root@centos3-3 plugins]# ./check_rpc -H 192.168.0.1 rpcbind  , la commande fonctionne. Je vais donc creer la commande dans centreon et deploie la nouvelle sonde, mais une fois en prod la sonde ne fonctionne pas, pourquoi ?;Le test a ete effectue en tant que ROOT, hors il faut tester les commandes en tant que centreon-engine.
Un check actif local c'est quoi ? ;C'est un check execute depuis le serveur centreon et qui va sonder directement le sevice concerne sur l'agent supervise. Il n'y a pas d'intermediaire.
La sonde check_http en check actif local n'a pas reussi a remonter l'etat du service supervise, que va t il se passer dans un premier temps ?;Le serveur de supervision va envoyer un host check pour verifier si l'etat de l'host est OK ou non et en fonction du resultat il continuera de remonter dans l'arborescence ou indiquera le lieu precis où l'incident a lieu.
Un check actif distant c'est quoi ?;C'est un check qui n'est pas directement effectue par le serveur centreon, il y a un intermediaire entre lui et le service supervise, par exemple le service SNMPd sur la machine supervise ou un serveur qui servira de relai. 
Un check passif c'est quoi ?;Un check passif c'ets lorsque c'est l'agent qui informe le serveur de supervision de son etat, typiquement utilise pour les SNMP trap.
Quelle action faut il faire apres une modification dans la conf de Centreon ?;Il faut appliquer les changements en exportant la conf dans la BDD de Centreon (> configuration > pollers > Apply configuration)
Je ne sais pas comment me servir d'une sonde, mon formateur prefere me dit de lire le man mais je n'arrive pas a ouvrir le man pour cette commande check_... , comment faire ? ;Pour comprendre l'utilisation d'une commande de check il faut executer la commande suivi de -h , exemple : check_rpc -h , on peut aussi, si le fichier le permet, l'ouvrir et regarder le script derriere.
Mon formateur prefere me dit d'utiliser des variables lors de la creation de mes commandes pour faciliter la portabilite de ces dernieres, mais Centreon ne semble pas comprendre les differentes variables que je lui demande d'interpreter comme : check_ping -H $adresseip ,   pourquoi ? ;Dans Centreon on peut utiliser les maccros qui font la même chose et qui sont interpretees par Centreon correctement, au travers des maccros a definir $USERx$ ou des maccros predefinies comme $HOSTADDRESS$ ou des maccros experts comme $_HOSTBLABLA$ et enfin des $ARGx$.
Je souhaite utiliser la commande check_snmp_storage.pl , mais lors de mes tests l'agent snmp de la machine cliente indique une erreur de community, pourquoi ?;C'est la mauvaise communaute qui a ete indique dans les parametres de la commande, par defaut la communaute snmp est : public
Dans le cas de figure d'une supervision distribuee avec plusieurs serveurs centreon, comment les serveurs Pollers vont recuperer les fichiers de conf ?;Ils vont recuperer les fichiers de conf depuis le serveur Centreon Central database au travers de fichier conf transmis par SSH via l'utilisateur centreon (il faudra au prealable faire un echange de key ssh)
Comment le serveur central envoie les donnees SQL aux serveurs pollers ?;It's a TRAP !!! ce sont les serveurs pollers qui envoient les donnees vers la database SQL avec NDO2b ou centreon-broker, que le Central recupere pour les afficher dans l'interface de monitoring web
A quoi sert NDOutils ? Comment ça fonctionne ?;C'est un module compose de 2 autres modules : NDOMOD qui permet de recuperer les infos remontees par Nagios et les transmettre a NDO2DB qui ecoute sur le port 5669 TCP et va ecrire les donnees sur la base SQL
Dans le cas de figure où il y a un central, une base SQL reliee au central, un poller et un poste supervise dans le reseau du poller. On configure une sonde check_disk pour superviser donc ce poste, qui effectue le check concretement ?;C'est le Poller qui effectue le check et qui envoie les infos dans la base SQL du central.
Qui gere l'interface Web de centreon dans une infra de supervision distribuee avec plusieurs pollers ?;C'est le serveur qui possede le rôle Centreon, habituellement le centreon central database
De quoi est compose un poller de supervision ? ;Il est compose d'un moteur de supervision (Nagios, Centreon engine, ...) et des NDOutils ou Centreon-broker.
De quoi est compose le serveur Central dans le cas d'une infra de supervision distribuee ?;Il est compose d'un moteur de supervision (centreon-engine, nagios, ...), du module Centreon (interface-web), de NDOutils ou centreon-broker, d'une base de donnee SQL.
Quel fichier me permet de configurer le snmp ainsi que les community sur mes postes clients de supervision ?;C'est le /etc/snmp/snmpd.conf
Mon service babidi est tombe sur mon serveur boo, est-il possible de le relancer depuis mon centreon ?;Oui si le snmp est ouvert en ecriture pour une community dans le fichier snmpd.conf de l'agent supervise.
Où puis je modifier le nom de la communaute snmp qui aura acces aux infos de mon client Windows ? ;Dans les proprietes du service SNMP
Quelle autre alternative y a t il a un check_snmp... ? ;Il existe le check_nrpe ou check_nsc
